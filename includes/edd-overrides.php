<?php

	/**
	 * Unset first and last name as required fields in checkout
	 * @param  Array $required_fields Required fields
	 */
	function keel_edd_purchase_form_required_fields( $required_fields ) {
		unset( $required_fields['edd_first'] );
		unset( $required_fields['edd_last'] );
		return $required_fields;
	}
	add_filter( 'edd_purchase_form_required_fields', 'keel_edd_purchase_form_required_fields' );



	/**
	 * Remove default name fields from checkout
	 */
	function keel_edd_remove_names() {
		remove_action( 'edd_purchase_form_after_user_info', 'edd_user_info_fields' );
	}
	add_action( 'init', 'keel_edd_remove_names' );



	/**
	 * Remove name fields from checkout form
	 */
	function keel_edd_user_info_fields() {
		if( is_user_logged_in() ) :
			$user_data = get_userdata( get_current_user_id() );
		endif;
		?>
		<fieldset id="edd_checkout_user_info">
			<?php do_action( 'edd_purchase_form_before_email' ); ?>
			<p id="edd-email-wrap">
				<label class="edd-label" for="edd-email"><strong><?php _e('Email Address', 'edd'); ?></strong></label>
				<input class="edd-input required" type="email" name="edd_email" placeholder="<?php _e('Email address', 'edd'); ?>" id="edd-email" value="<?php echo is_user_logged_in() ? $user_data->user_email : ''; ?>"/>
			</p>
			<?php do_action( 'edd_purchase_form_after_email' ); ?>
			<?php do_action( 'edd_purchase_form_user_info' ); ?>
		</fieldset>
		<?php
	}
	add_action( 'edd_purchase_form_after_user_info', 'keel_edd_user_info_fields' );



	/**
	 * Only allow a single item at checkout
	 */
	function keel_edd_force_single_item_cart() {
		edd_empty_cart();
		return edd_get_cart_contents();
	}
	// add_filter( 'edd_add_to_cart', 'keel_edd_force_single_item_cart', 1, 1 );



	/**
	 * Only load PayPal JS and CSS on checkout page
	 */
	function keel_edd_only_load_files_on_checkout() {
		if ( is_page( 'checkout' ) ) return;
		wp_dequeue_style( 'pal-for-edd' );
		wp_dequeue_script( 'pal-for-edd' );
		wp_dequeue_script( 'pal-for-eddpaypal_for_edd_blockUI' );
	}
	add_action( 'wp_enqueue_scripts', 'keel_edd_only_load_files_on_checkout' );



	/**
	 * Disable purchase button if no JS
	 */
	function keel_edd_no_js_disable_purchase() {
		$label = edd_get_option( 'checkout_label', '' );

		if ( edd_get_cart_total() ) {
			$complete_purchase = ! empty( $label ) ? $label : __( 'Purchase', 'easy-digital-downloads' );
		} else {
			$complete_purchase = ! empty( $label ) ? $label : __( 'Free Download', 'easy-digital-downloads' );
		}

		echo
			'<div id="keel-edd-no-js-purchase-message">' .
				'<em>' . __( 'Please enabled JavaScript to complete your purchase.', 'keel' ) . '</em><br>' .
				'<button class="btn btn-large disabled" disabled="disabled">' . $complete_purchase . '</button>' .
			'</div>';
	}
	add_action( 'edd_purchase_form_after_submit', 'keel_edd_no_js_disable_purchase' );



	/**
	 * Remove the "Go Back" button from non-ajax implementations
	 */
	function keel_edd_checkout_submit() {
	?>
		<fieldset id="edd_purchase_submit">
			<?php do_action( 'edd_purchase_form_before_submit' ); ?>

			<?php edd_checkout_hidden_fields(); ?>

			<?php echo edd_checkout_button_purchase(); ?>

			<?php do_action( 'edd_purchase_form_after_submit' ); ?>

			<?php
				// if ( edd_is_ajax_disabled() ) :
				if ( false ) :
			?>
				<p class="edd-cancel"><a href="<?php echo edd_get_checkout_uri(); ?>"><?php _e( 'Go back', 'easy-digital-downloads' ); ?></a></p>
			<?php endif; ?>
		</fieldset>
	<?php
	}
	add_action( 'edd_purchase_form_after_cc_form', 'keel_edd_checkout_submit', 9999 );

	function keel_edd_remove_checkout_submit() {
		remove_action( 'edd_purchase_form_after_cc_form', 'edd_checkout_submit', 9999 );
	}
	add_action( 'init', 'keel_edd_remove_checkout_submit' );



	/**
	 * Add cart icon to the navigation menu if items are in cart
	 */
	function keel_edd_add_cart_link_to_nav( $items, $args ) {
		if ( $args->theme_location !== 'primary' ) return $items;
		if ( !function_exists( 'edd_get_cart_quantity' ) ) return $items;
		$cart_quantity = edd_get_cart_quantity();
		if ( $cart_quantity === 0 ) return $items;
		$active = is_page( edd_get_option( 'purchase_page', false ) ) ? 'class="active"' : '';
		$items .=
			'<li ' . $active . '>' .
				'<a href="' . edd_get_checkout_uri() . '">' .
					'<svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 17 17"><path d="M6.375 15.406a1.594 1.594 0 1 1-3.189 0 1.594 1.594 0 0 1 3.189 0zM17 15.406a1.594 1.594 0 1 1-3.189 0 1.594 1.594 0 0 1 3.189 0zM17 8.5V2.125H4.25c0-.587-.476-1.063-1.063-1.063H-.001v1.063h2.125l.798 6.841a2.124 2.124 0 0 0 1.327 3.784h12.75v-1.063H4.249a1.063 1.063 0 0 1-1.063-1.063v-.011l13.812-2.114z"/></svg> ' . __( 'Cart', 'keel' ) . ' (' . $cart_quantity . ')' .
				'</a>' .
			'</li>';
		return $items;
	}
	add_filter( 'wp_nav_menu_items', 'keel_edd_add_cart_link_to_nav', 10, 2);



	/**
	 * Add custom payment icons
	 * @param  Array  $icons The icons
	 * @return Array         The updated icons
	 */
	function keel_edd_add_payment_icons($icons) {
		unset($icons);
		$icons = array(
			'visa' => 'Visa',
			'mastercard' => 'Mastercard',
			'americanexpress' => 'AMEX',
			'discover' => 'Discover',
			'jcb' => 'JCB',
			'diners' => 'Diners',
			'paypal' => 'PayPal',
		);
	    return $icons;
	}
	add_filter( 'edd_accepted_payment_icons', 'keel_edd_add_payment_icons' );



	/**
	 * Remove default payment icons
	 */
	function keel_edd_remove_show_payment_icons() {
		remove_action( 'edd_payment_mode_top', 'edd_show_payment_icons' );
		remove_action( 'edd_checkout_form_top', 'edd_show_payment_icons' );
	}
	add_action( 'init', 'keel_edd_remove_show_payment_icons' );



	/**
	 * Show Payment Icons by getting all the accepted icons from the EDD Settings
	 * then outputting the icons.
	 *
	 * @since 1.0
	 * @return void
	*/
	function keel_edd_show_payment_icons() {

		if( edd_show_gateways() && did_action( 'edd_payment_mode_top' ) ) {
			return;
		}

		$payment_methods = edd_get_option( 'accepted_cards', array() );

		if( empty( $payment_methods ) ) {
			return;
		}

		$icons = array(
			'visa' => '<svg xmlns="http://www.w3.org/2000/svg" class="icon" id="icon-visa" viewBox="0 0 27 17"><path d="M0 1.444C0 .647.647 0 1.443 0h24.183c.797 0 1.443.646 1.443 1.444v14.112c0 .797-.647 1.444-1.443 1.444H1.443A1.443 1.443 0 0 1 0 15.556V1.444zm10.021 10.598h1.925l1.205-7.066h-1.926l-1.204 7.066zm8.91-6.892a4.976 4.976 0 0 0-1.726-.297c-1.903 0-3.243.958-3.255 2.332-.011 1.015.957 1.582 1.688 1.92.75.346 1.002.567.998.876-.005.474-.599.69-1.152.69-.771 0-1.18-.107-1.813-.371l-.248-.112-.27 1.582c.45.197 1.282.368 2.145.377 2.024 0 3.339-.947 3.354-2.414.007-.804-.506-1.415-1.617-1.92-.673-.327-1.085-.545-1.081-.876 0-.294.349-.608 1.103-.608.63-.01 1.086.128 1.441.271l.173.082.261-1.531zm4.939-.167h-1.488c-.461 0-.806.126-1.008.586l-2.86 6.475h2.022s.331-.871.405-1.062l2.466.003c.058.247.234 1.059.234 1.059h1.787l-1.559-7.061zM6.32 8.82l-.675-3.247c-.117-.447-.455-.581-.873-.597H1.666l-.025.147a8.102 8.102 0 0 1 2.023.775l1.712 6.137 2.038-.002 3.032-7.052h-2.04L6.52 9.799l-.201-.979zm15.175.717l.767-1.975c-.011.019.158-.409.255-.674l.13.609.446 2.04h-1.599z"/></svg>',
			'mastercard' => '<svg xmlns="http://www.w3.org/2000/svg" class="icon" id="icon-mastercard" viewBox="0 0 27 17"><path d="M0 15.556C0 16.354.646 17 1.443 17h24.183c.797 0 1.443-.646 1.443-1.444V1.444C27.069.646 26.423 0 25.626 0H1.443C.646 0 0 .646 0 1.444zm25.409-7.057c0 4.056-3.306 7.356-7.37 7.356a7.343 7.343 0 0 1-4.504-1.538 7.346 7.346 0 0 1-4.503 1.538c-4.064 0-7.37-3.301-7.37-7.356s3.306-7.355 7.37-7.355c1.695 0 3.258.573 4.503 1.537a7.338 7.338 0 0 1 4.504-1.537c4.064 0 7.37 3.299 7.37 7.355zm-7.37-6.697c3.706 0 6.71 2.998 6.71 6.697s-3.004 6.697-6.71 6.697a6.685 6.685 0 0 1-3.99-1.314 7.382 7.382 0 0 0 2.049-3.293h-.69a6.681 6.681 0 0 1-1.872 2.873 6.694 6.694 0 0 1-1.871-2.873h-.691a7.359 7.359 0 0 0 2.049 3.293 6.688 6.688 0 0 1-3.991 1.314c-3.706 0-6.71-2.999-6.71-6.697s3.004-6.697 6.71-6.697c1.496 0 2.875.489 3.991 1.314a7.36 7.36 0 0 0-2.117 3.534h.684a6.695 6.695 0 0 1 1.946-3.114 6.697 6.697 0 0 1 1.947 3.114h.683a7.35 7.35 0 0 0-2.117-3.534 6.685 6.685 0 0 1 3.99-1.314zM6.315 6.903H5.241L4.57 8.901l-.028-1.998h-.996l-.54 3.228h.648l.416-2.466.058 2.466H4.6l.885-2.481-.396 2.481h.692l.535-3.228zm1.287 2.058c-.013.388-.215.656-.498.656-.15 0-.247-.104-.247-.268 0-.264.198-.398.591-.398.05 0 .082.003.154.01zm.503 1.17c.018-.199.146-1.014.207-1.393.035-.22.057-.386.056-.521.001-.504-.314-.769-.908-.769-.256 0-.484.038-.828.139l-.096.59c.115-.038.394-.123.732-.118.324 0 .444.065.444.239a.626.626 0 0 1-.027.171 2.39 2.39 0 0 0-.282-.021c-.768 0-1.214.372-1.214 1.012 0 .424.256.716.632.716.317 0 .55-.103.725-.318l-.013.272h.574zm9.04-3.307c-.917 0-1.558.806-1.558 1.96 0 .857.464 1.393 1.209 1.393.191 0 .357-.025.611-.095l.121-.735c-.229.112-.417.166-.588.166-.402 0-.645-.297-.645-.786 0-.711.361-1.21.878-1.21.192 0 .371.05.618.175l.113-.7c-.101-.04-.458-.167-.76-.167zm1.994 2.137c-.012.388-.215.656-.497.656-.152 0-.249-.104-.249-.268 0-.264.199-.398.591-.398.051 0 .083.003.155.01zm.503 1.17c.018-.199.147-1.014.207-1.393.035-.22.057-.386.056-.521.001-.504-.314-.769-.909-.769-.254 0-.482.038-.827.139l-.096.59c.115-.038.393-.123.732-.118.323 0 .443.065.443.239a.656.656 0 0 1-.026.171 2.39 2.39 0 0 0-.282-.021c-.767 0-1.215.372-1.215 1.012 0 .424.257.716.632.716.316 0 .55-.103.726-.318l-.013.272h.573zm-8.136-.621a.575.575 0 0 1-.186.025c-.165 0-.237-.059-.237-.194.001-.084.115-.705.195-1.203h.355l.094-.631h-.354l.08-.396h-.688s-.26 1.545-.299 1.789c-.044.28-.1.584-.096.7 0 .374.193.577.546.577.16 0 .308-.027.498-.085l.091-.581zm2.117.561l.114-.653a1.637 1.637 0 0 1-.715.164c-.4 0-.644-.159-.598-.538h1.369c.06-.266.085-.454.085-.646 0-.581-.363-.95-.93-.95-.693 0-1.205.661-1.205 1.557 0 .768.401 1.17 1.172 1.171.241 0 .469-.034.706-.106zm-.387-1.557h-.76c.063-.302.22-.47.44-.47.393 0 .324.416.32.47zm-4.599-.178c0 .333.16.561.527.733.28.132.324.17.324.29 0 .163-.124.236-.398.236-.206 0-.399-.031-.62-.103l-.096.606c.158.034.298.066.721.078.73 0 1.067-.278 1.067-.877 0-.362-.14-.572-.488-.731-.29-.134-.323-.163-.323-.285 0-.142.115-.214.34-.214.135 0 .321.015.496.04l.099-.609a4.762 4.762 0 0 0-.609-.051c-.774 0-1.042.403-1.039.888zm14.902 1.795l.527-3.228h-.683l-.153.933c-.189-.249-.393-.357-.661-.357-.61 0-1.126.735-1.126 1.61 0 .656.332 1.088.835 1.088.253 0 .448-.088.638-.29l-.033.244h.655zm-1.021-.606c.322 0 .549-.365.549-.884 0-.334-.129-.515-.367-.515-.314 0-.537.365-.537.881 0 .344.119.518.355.518zm-2.135-2.019c-.087.812-.24 1.634-.36 2.448l-.032.177h.691c.248-1.605.308-1.918.696-1.879.062-.33.176-.616.263-.762-.29-.06-.452.104-.663.415.017-.135.047-.265.04-.399h-.635zm-6.048 0c-.087.812-.241 1.634-.361 2.448l-.032.177h.692c.248-1.605.307-1.918.695-1.879.063-.33.178-.616.263-.762-.289-.06-.452.104-.663.415.017-.135.047-.265.041-.399h-.635z"/></svg>',
			'americanexpress' => '<svg xmlns="http://www.w3.org/2000/svg" class="icon" id="icon-amex" viewBox="0 0 27 17"><path d="M0 1.477A1.44 1.44 0 0 1 1.44.036h24.132c.795 0 1.44.645 1.44 1.441v14.082A1.44 1.44 0 0 1 25.572 17H1.44A1.44 1.44 0 0 1 0 15.559V1.477zm0 6.515h1.298l.293-.703h.655l.292.703h2.553v-.537l.228.54h1.325l.228-.548v.545h6.345l-.003-1.154h.123c.086.003.111.011.111.152v1.001h3.282v-.269c.265.141.676.269 1.218.269h1.381l.295-.703h.655l.289.703h2.66v-.668l.403.668h2.132V3.578h-2.11v.521l-.295-.521h-2.165v.521l-.271-.521h-2.924c-.49 0-.92.068-1.267.258v-.258h-2.018v.258c-.221-.195-.523-.258-.858-.258H6.482l-.495 1.14-.508-1.14H3.157v.521l-.255-.521H.922l-.92 2.098v2.315zm8.2-.621h-.779l-.003-2.478-1.101 2.478H5.65l-1.104-2.48v2.48H3.001l-.292-.706H1.128l-.295.706H.008l1.36-3.164h1.128l1.292 2.995V4.207h1.239l.994 2.146.913-2.146h1.264v3.164zM2.436 6.006l-.52-1.261-.517 1.261h1.037zm8.867 1.365v-.654H9.526v-.632h1.735v-.649H9.526v-.57h1.777v-.659H8.766v3.164h2.537zm3.577-2.312c0-.353-.144-.559-.384-.701-.246-.141-.531-.152-.92-.152h-1.747V7.37h.759V6.219h.815c.273 0 .443.024.554.135.138.152.12.426.12.616l.003.399h.766v-.622c0-.283-.018-.423-.126-.58a.88.88 0 0 0-.376-.266.89.89 0 0 0 .535-.843zm-.994.445c-.104.063-.228.065-.376.065h-.923v-.703h.935c.132 0 .27.006.36.057.099.046.159.144.159.28 0 .138-.058.25-.156.301zm2.209 1.867V4.207h-.775v3.164h.775zm8.99 0h-1.076L22.57 4.996v2.375h-1.547l-.296-.706h-1.578l-.287.706h-.889c-.369 0-.837-.081-1.101-.35-.267-.269-.406-.633-.406-1.208 0-.469.083-.898.409-1.237.246-.253.63-.369 1.153-.369h.735v.678h-.72c-.277 0-.434.041-.584.187-.129.133-.218.385-.218.717 0 .339.068.583.209.743.117.125.329.163.529.163h.341l1.07-2.488h1.138L21.814 7.2V4.207h1.156l1.335 2.203V4.207h.778v3.164zm-4.617-1.365l-.526-1.261-.523 1.261h1.048zm6.545 6.403c-.184.269-.544.405-1.031.405h-1.467v-.679h1.461c.145 0 .246-.019.307-.078a.277.277 0 0 0 .09-.206.259.259 0 0 0-.093-.209c-.055-.048-.135-.07-.268-.07-.713-.024-1.603.022-1.603-.979 0-.459.293-.942 1.09-.942h1.513v-.63h-1.405c-.424 0-.732.101-.95.258v-.258h-2.079c-.332 0-.723.082-.907.258v-.258h-3.712v.258c-.295-.212-.794-.258-1.024-.258h-2.449v.258c-.234-.225-.754-.258-1.07-.258h-2.74l-.627.676-.587-.676H5.368v4.416h4.017l.646-.687.609.687 2.476.002V12.4h.243c.329.005.716-.008 1.058-.155v1.192h2.042v-1.151h.099c.126 0 .138.005.138.13v1.021H22.9c.394 0 .806-.1 1.034-.283v.283h1.968c.409 0 .809-.057 1.114-.204v-.823zm-12.299-1.718c0-.876-.677-1.043-1.28-1.043h-2.427l-.966 1.037-.934-1.037H6.053v3.165h3.008l.972-1.048.935 1.048h1.476v-1.061h.948c.664 0 1.322-.182 1.322-1.061zm-6.038 1.463H6.809v-.63h1.667v-.646H6.809v-.575h1.904l.831.922-.867.928zm3.011.371l-1.166-1.289 1.166-1.248v2.537zm1.738-1.416h-.981v-.806h.99c.274 0 .464.111.464.388 0 .274-.182.418-.473.418zm5.124-1.46v3.165h2.535v-.657l-1.778-.003v-.63h1.735v-.646h-1.735v-.575h1.778v-.654h-2.535zm-.96 1.694a.886.886 0 0 0 .538-.842c0-.361-.151-.559-.39-.703-.249-.132-.529-.149-.914-.149H15.07v3.165h.763v-1.156h.812c.277 0 .446.027.557.14.141.147.123.429.123.619v.396h.762v-.627c-.003-.279-.019-.423-.126-.578a.828.828 0 0 0-.372-.266zm-.458-.394c-.102.06-.227.065-.375.065h-.923v-.711h.935c.135 0 .271.003.362.057.098.051.157.149.157.285s-.059.244-.157.304zm6.852.195c.148.152.227.345.227.67 0 .681-.427.999-1.193.999h-1.479v-.679h1.473c.144 0 .246-.019.31-.078a.28.28 0 0 0-.003-.415c-.058-.048-.138-.07-.27-.07-.71-.024-1.6.022-1.6-.979 0-.459.29-.942 1.086-.942h1.522v.674h-1.393c-.138 0-.228.005-.304.057-.083.051-.114.127-.114.228 0 .119.071.201.166.236a.87.87 0 0 0 .296.036l.409.011c.412.01.695.081.867.255zm3.03-.822h-1.384c-.138 0-.23.005-.307.057-.08.051-.111.127-.111.228a.24.24 0 0 0 .166.236c.08.028.166.036.293.036l.412.011c.415.01.693.081.862.255.031.024.049.051.07.078v-.9z"/></svg>',
			'discover' => '<svg xmlns="http://www.w3.org/2000/svg" class="icon" id="icon-discover" viewBox="0 0 27 17"><path d="M0 1.444C0 .646.646 0 1.443 0h24.183c.797 0 1.443.646 1.443 1.444v14.112c0 .798-.646 1.444-1.443 1.444H1.443A1.443 1.443 0 0 1 0 15.556zm5.393 15.249h20.12c.678 0 1.227-.549 1.227-1.227V8.99s-7.539 5.321-21.347 7.703zm-2.24-8.929c.265-.222.424-.576.424-.93s-.159-.697-.424-.919C2.9 5.7 2.6 5.616 2.104 5.616h-.206v2.442h.206c.495 0 .808-.089 1.049-.293zM2.258 4.99H1.133v3.693h1.119c.595 0 1.024-.132 1.402-.426.448-.349.713-.874.713-1.418 0-1.09-.866-1.849-2.109-1.849zm2.461 3.693h.766V4.99h-.766zm2.64-2.285c-.46-.16-.595-.265-.595-.465 0-.233.241-.409.571-.409.23 0 .418.089.618.299l.401-.493A1.782 1.782 0 0 0 7.2 4.921c-.695 0-1.225.454-1.225 1.058 0 .509.247.769.966 1.013.3.099.453.166.53.21.153.094.23.227.23.382 0 .299-.253.521-.595.521a.914.914 0 0 1-.836-.492l-.495.448c.353.487.777.703 1.36.703.796 0 1.355-.498 1.355-1.212 0-.587-.258-.852-1.13-1.152zm1.371.431c0 1.085.907 1.927 2.073 1.927.33 0 .612-.061.961-.215v-.848c-.306.288-.578.404-.925.404-.772 0-1.319-.526-1.319-1.274 0-.709.565-1.268 1.284-1.268.366 0 .642.123.961.415v-.847a2.061 2.061 0 0 0-.943-.227c-1.161 0-2.091.859-2.091 1.932zm9.109.636l-1.048-2.48h-.837l1.667 3.787h.412l1.697-3.787h-.831l-1.061 2.48zm2.238 1.218h2.173v-.625h-1.407v-.997h1.355v-.625h-1.355v-.82h1.407V4.99h-2.173zm3.669-1.993c.489 0 .749-.2.749-.571 0-.359-.259-.547-.736-.547h-.236V6.69h.224zm1.537-.61c0-.691-.506-1.09-1.39-1.09h-1.136v3.693h.765V7.2h.1l1.06 1.483h.942l-1.236-1.556c.577-.11.895-.481.895-1.047zm-13.269.756c0 1.085.936 1.964 2.09 1.964s2.09-.88 2.09-1.964v-.001c0-1.085-.936-1.963-2.09-1.963s-2.09.878-2.09 1.963v.001z"/></svg>',
			'jcb' => '<svg xmlns="http://www.w3.org/2000/svg" class="icon" id="icon-jcb" viewBox="0 0 27 17"><path d="M0 1.444v14.112C0 16.354.646 17 1.443 17h24.183c.797 0 1.443-.646 1.443-1.444V1.444C27.069.646 26.423 0 25.626 0H1.443C.646 0 0 .646 0 1.444zm6.467 7.902s-.01-3.23.001-4.718c.146-.869 1.036-1.52 1.908-1.441h2.429c-.003 2.958-.002 5.915-.007 8.873-.027.875-.79 1.641-1.667 1.663-.888.003-1.776 0-2.663.001v-3.695c.659.121 1.322.251 1.996.212.647-.034 1.427-.133 1.798-.738.274-.447.151-.98.174-1.475l-.008-1.264-1.5.008c-.007.736.015 1.473-.012 2.207-.058.488-.58.739-1.029.694-.519-.005-.981-.199-1.42-.328zm4.897-2.035c.006-.832-.011-1.664.009-2.495.061-.792.726-1.459 1.509-1.555.787-.026 1.576-.004 2.364-.011h.458c-.002 2.972.004 5.944-.003 8.915-.057.923-.947 1.698-1.87 1.611h-2.467V9.732c.643.508 1.512.584 2.305.574a6.473 6.473 0 0 0 1.541-.229l-.011-.733c-.709.341-1.587.582-2.327.194-.587-.336-.656-1.183-.342-1.728.388-.565 1.171-.582 1.781-.462.299.027.701.294.899.288v-.671c-1.023-.259-2.119-.342-3.144-.049-.255.087-.504.21-.702.396zm4.839 2.838h2.732c.508.019 1.127-.306 1.115-.879.009-.531-.538-.834-1.007-.872.375-.044.758-.307.794-.709.087-.525-.423-.9-.902-.911-.91-.015-1.821-.002-2.732-.006v-1.76c-.062-.915.712-1.764 1.621-1.819.904-.012 1.81-.002 2.714-.005v8.767c.045.888-.712 1.684-1.584 1.763-.917.008-1.834.001-2.751.003v-3.572zm.868-2.813h.937s.439 0 .439.429-.439.43-.439.43h-.937v-.859zm1.003 1.363s.494-.029.494.461-.491.461-.494.461h-1.003v-.922h1.003z"/></svg>',
			'diners' => '<svg xmlns="http://www.w3.org/2000/svg" class="icon" id="icon-diners" viewBox="0 0 27 17"><path d="M0 1.444C0 .647.647 0 1.443 0h24.183c.797 0 1.443.646 1.443 1.444v14.112c0 .797-.647 1.444-1.443 1.444H1.443A1.443 1.443 0 0 1 0 15.556V1.444zm21.112 7.108c0-3.588-2.995-6.069-6.276-6.067h-2.824c-3.321-.001-6.054 2.48-6.054 6.067 0 3.282 2.733 5.979 6.054 5.963h2.824c3.281.016 6.276-2.681 6.276-5.963zm-9.087-5.57a5.502 5.502 0 0 0-5.494 5.507 5.501 5.501 0 0 0 5.494 5.506c3.035-.001 5.494-2.465 5.495-5.506s-2.46-5.506-5.495-5.507zM8.543 8.489a3.494 3.494 0 0 1 2.236-3.257v6.514a3.495 3.495 0 0 1-2.236-3.257zm4.728 3.258V5.231a3.493 3.493 0 0 1 2.237 3.258 3.493 3.493 0 0 1-2.237 3.258z"/></svg>',
			'paypal' => '<svg xmlns="http://www.w3.org/2000/svg" class="icon" id="icon-paypal" viewBox="0 0 26 17"><path d="M21.122 8.106a.747.747 0 0 0-.516-.183c-.274 0-.503.094-.688.283s-.278.42-.278.694c0 .207.067.37.2.488s.307.178.522.178c.266 0 .494-.093.683-.278s.283-.411.283-.677c0-.215-.069-.383-.205-.505zM8.511 8.106a.747.747 0 0 0-.516-.183c-.274 0-.503.094-.688.283s-.278.42-.278.694c0 .207.065.37.194.488s.301.178.516.178c.274 0 .505-.09.694-.272s.283-.409.283-.683c0-.215-.069-.383-.205-.505z"/><path d="M24.601 0H1.866A1.868 1.868 0 0 0 0 1.866v13.267c0 1.029.837 1.866 1.866 1.866h22.735a1.868 1.868 0 0 0 1.866-1.866V1.866A1.868 1.868 0 0 0 24.601 0zM4.098 8.744c-.022 0-.074-.004-.155-.011s-.152-.011-.211-.011-.122.006-.189.017-.122.035-.166.072a.22.22 0 0 0-.078.144l-.2 1.221c-.015.141-.096.211-.244.211h-.844c-.044 0-.081-.018-.111-.056s-.041-.078-.033-.122l.722-4.529c.015-.141.092-.211.233-.211h1.776c.459 0 .831.098 1.116.294s.427.513.427.949c0 .637-.181 1.134-.544 1.493s-.862.538-1.499.538zm5.928-1.465l-.455 2.897c-.022.141-.104.211-.244.211h-.766c-.096 0-.144-.059-.144-.178 0-.067.015-.144.044-.233-.133.148-.311.266-.533.355s-.437.133-.644.133c-.429 0-.772-.129-1.027-.389s-.383-.607-.383-1.043c0-.54.187-1.01.561-1.41s.827-.6 1.36-.6c.503 0 .855.148 1.055.444.022-.244.085-.366.189-.366h.844c.044 0 .081.019.111.056s.041.078.033.122zm1.455 4.252h-.855c-.096 0-.144-.048-.144-.144 0-.059.303-.503.91-1.332-.007-.029-.094-.289-.261-.777l-.466-1.366c-.144-.422-.216-.64-.216-.655 0-.037.015-.072.044-.105s.063-.05.1-.05h.833c.126 0 .207.059.244.178l.488 1.665 1.177-1.732a.235.235 0 0 1 .2-.111h.855c.037 0 .07.017.1.05s.044.068.044.105c0 .037-.007.063-.022.078l-2.831 4.085a.235.235 0 0 1-.2.111zm5.228-2.787c-.022 0-.074-.004-.155-.011s-.152-.011-.211-.011-.122.006-.189.017-.122.035-.166.072a.22.22 0 0 0-.078.144l-.2 1.288c-.03.096-.089.144-.178.144h-.91c-.044 0-.082-.018-.111-.056s-.041-.078-.033-.122L15.2 5.68c.015-.141.096-.211.244-.211h1.765c.459 0 .831.098 1.116.294s.427.513.427.949c0 .637-.181 1.134-.544 1.493s-.862.538-1.499.538zm5.929-1.465l-.455 2.897c-.022.141-.104.211-.244.211h-.766c-.096 0-.144-.059-.144-.178 0-.029.007-.074.022-.133s.022-.092.022-.1c-.126.148-.3.266-.522.355s-.44.133-.655.133c-.429 0-.772-.129-1.027-.389s-.383-.607-.383-1.043c0-.54.187-1.01.561-1.41s.827-.6 1.36-.6c.511 0 .862.148 1.055.444.022-.244.085-.366.189-.366h.844c.044 0 .081.019.111.056s.041.078.033.122zm1.965-1.643l-.722 4.541c-.015.141-.093.211-.233.211h-.733c-.044 0-.081-.017-.111-.05s-.045-.068-.045-.105l.011-.022.722-4.618c.015-.081.063-.122.144-.122h.821c.096 0 .144.052.144.155v.011z"/><path d="M17.298 6.618c-.089-.078-.181-.124-.277-.139s-.226-.022-.389-.022h-.2c-.082 0-.13.041-.144.122l-.189 1.188.355-.011c.326 0 .57-.055.733-.166s.244-.322.244-.633c0-.148-.044-.261-.133-.339zM4.664 6.585c-.133-.085-.348-.128-.644-.128h-.211c-.081 0-.13.041-.144.122l-.189 1.188.366-.011c.289 0 .511-.041.666-.122s.251-.252.289-.511c.044-.274 0-.453-.133-.538z"/></svg>',
		);

		?>

		<div class="edd-payment-icons">
			<?php foreach( $payment_methods as $key => $card ) : ?>
				<?php echo $icons[$key]; ?>
				<span class="icon-fallback-text"><?php echo esc_html( $card ); ?></span>
			<?php endforeach ?>
		</div>

		<?php
	}
	add_action( 'edd_payment_mode_top', 'keel_edd_show_payment_icons' );
	add_action( 'edd_checkout_form_top', 'keel_edd_show_payment_icons' );